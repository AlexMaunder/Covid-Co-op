(this["webpackJsonpcovid-co-op"]=this["webpackJsonpcovid-co-op"]||[]).push([[0],{145:function(e,t,a){},154:function(e,t,a){e.exports=a(478)},174:function(e,t,a){},179:function(e,t,a){},195:function(e,t,a){},196:function(e,t,a){},471:function(e,t,a){},472:function(e,t,a){},473:function(e,t,a){},474:function(e,t,a){},475:function(e,t,a){},476:function(e,t,a){},478:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(20),o=a.n(s),l=a(152),c=a(2),i=a(3),u=a(6),d=a(5),m=a(4),p=a(7),h=a(10),g=a.n(h),f=(a(174),{url:{API_URL:"https://covid-co-op.herokuapp.com",FRONT_END_URL:"https://joshjm.github.io/Covid-Co-op"}}),E=(f.url.FRONT_END_URL,f.url.API_URL,function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light static-top mb-5 shadow"},r.a.createElement(p.b,{to:"/",className:"navbar-brand"},"Covid Coop\u2695"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarResponsive","aria-controls":"navbarResponsive","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarResponsive"},this.props.loggedInStatus?r.a.createElement("ul",{className:"navbar-nav ml-auto "},r.a.createElement("li",{className:"nav-item"},r.a.createElement(p.b,{to:"/",className:"nav-link",onClick:this.props.handleLogout},"Click to log out ",this.props.userID.name)),r.a.createElement("li",{className:"nav-item"},r.a.createElement(p.b,{to:"/",className:"nav-link"},"Home")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(p.b,{to:"/order",className:"nav-link"},"Place order")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(p.b,{to:"/shoppingcart",className:"nav-link"},"View Cart")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(p.b,{to:"/my-products",className:"nav-link"},"My Products")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(p.b,{to:"/profile",className:"nav-link"},"My Profile"))):r.a.createElement("ul",{className:"navbar-nav ml-auto "},r.a.createElement("li",{className:"nav-item"},r.a.createElement(p.b,{to:"/",className:"nav-link"},"Home")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(p.b,{to:"/sign-up",className:"nav-link"},"Sign up")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(p.b,{to:"/sign-in",className:"nav-link"},"Sign in")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(p.b,{to:"/order",className:"nav-link"},"Place order")))))}}]),a}(n.Component)),v=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"About page"))}}]),a}(n.Component),b=a(63),y=(a(179),{lat:-25.363,lng:134.211}),C={width:"100%",height:"100%"},N={position:"relative",left:"0",width:"100%",height:"500px"},w=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={},console.log(n.props),n}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement(b.Map,{google:this.props.google,zoom:this.props.isLoggedIn?8:4,style:C,containerStyle:N,initialCenter:this.props.isLoggedIn?{lat:this.props.user.lat,lng:this.props.user.lng}:y},this.props.products.map((function(e){var t={lat:e.lat,lng:e.lng};return r.a.createElement(b.Marker,{key:e.id,name:e.name,position:t})})))}}]),a}(n.Component),S=Object(b.GoogleApiWrapper)({apiKey:"AIzaSyBCB1kU1qZRdoMXme2dZbw5QoKadpQnrjM"})(w);function O(e){var t="https://maps.googleapis.com/maps/api/geocode/".concat("json","?");return g.a.get("".concat(t,"key=").concat("AIzaSyBCB1kU1qZRdoMXme2dZbw5QoKadpQnrjM","&address=").concat(e))}n.Component,a(195),f.url.FRONT_END_URL,f.url.API_URL;var j=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={isLoggedIn:!1,user:{}},n}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Covid Coop Home"),r.a.createElement("h5",null,"Together we are strong."),r.a.createElement("p",null,"Covid Coop is a non-profit organisation aiming to link medical product suppliers to organisations in need.",this.props.loggedInStatus?"":r.a.createElement("span",null," Create an account and make a difference today!")),r.a.createElement(S,this.props))}}]),a}(n.Component),k=a(30),P=(a(196),a(67),f.url.FRONT_END_URL,f.url.API_URL),L={lat:-25.363,lng:134.211},_=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(k.a)({},a,r)),O(n.state.address).then((function(e){if(console.log(e),"ZERO_RESULTS"==e.data.status)console.log("NO RESULTS"),n.setState({coordinates:L});else{var t=e.data.results[0].geometry.location;n.setState({coordinates:t})}}))},n.handleSubmit=function(e){e.preventDefault();var t={email:n.state.email,password:n.state.password,password_confirmation:n.state.password_confirmation,location:n.state.address,lat:n.state.coordinates.lat,lng:n.state.coordinates.lng};g.a.post(P+"/users",t,{withCredentials:!0}).then((function(e){"created"===e.data.status?(n.props.handleLogin(e.data),n.redirect()):n.setState({errors:e.data.errors})})).catch((function(e){return console.log("api errors:",e)}))},n.redirect=function(){n.props.history.push("/")},n.handleErrors=function(){return r.a.createElement("div",null,r.a.createElement("ul",null,n.state.errors.map((function(e){return r.a.createElement("li",{key:e},e)}))))},n.state={email:"",password:"",password_confirmation:"",address:"",coordinates:{lat:null,lng:null},errors:""},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state;e.email,e.password,e.password_confirmation,e.address;return r.a.createElement("div",{className:"row justify-content-md-center"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h2",{className:"center"},"Sign Up"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Email"),r.a.createElement("input",{className:"form-control",name:"email",type:"email",id:"email",placeholder:"Email",onChange:this.handleChange,value:this.state.email})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Password"),r.a.createElement("input",{className:"form-control",type:"password",name:"password",id:"password",placeholder:"Password",onChange:this.handleChange,value:this.state.password})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null," Confirm Password"),r.a.createElement("input",{className:"form-control",type:"password",name:"password_confirmation",id:"password-confirmation",placeholder:"Password",onChange:this.handleChange,value:this.state.password_confirmation})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Address"),r.a.createElement("input",{className:"form-control",type:"text",name:"address",id:"address",placeholder:"Address",onChange:this.handleChange,value:this.state.address}),"Latitude: ",this.state.coordinates.lat," Longitude: ",this.state.coordinates.lng),r.a.createElement("button",{type:"submit",id:"submit-btn",className:"btn btn-primary"},"Submit")),r.a.createElement("div",null,this.state.errors?this.handleErrors():null)))))}}]),a}(n.Component),I=(a(471),a(53)),R=a.n(I),U=a(9),D=(f.url.FRONT_END_URL,f.url.API_URL),T=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(k.a)({},a,r))},n.handleSubmit=function(e){e.preventDefault();var t=n.state,a={email:t.email,password:t.password};g.a.post(D+"/login",{user:a},{withCredentials:!0}).then((function(e){e.data.logged_in?(n.props.handleLogin(e.data),n.props.history.push("/"),R.a.set("user","loginTrue",{expires:1}),n.props.readCookie()):n.setState({errors:e.data.errors})})).catch((function(e){return console.log("api errors:",e)}))},n.handleErrors=function(){return r.a.createElement("div",null,r.a.createElement("ul",null,n.state.errors.map((function(e){return r.a.createElement("li",{key:e},e)}))))},n.state={email:"",password:"",errors:""},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state;e.email,e.password;return r.a.createElement("div",{className:"row justify-content-md-center"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h2",{className:"center"},"Sign In"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Email"),r.a.createElement("input",{className:"form-control",name:"email",type:"email",id:"email",placeholder:"Email",value:this.state.email,onChange:this.handleChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Password"),r.a.createElement("input",{className:"form-control",name:"password",type:"password",id:"password",placeholder:"Password",value:this.state.password,onChange:this.handleChange})),r.a.createElement("button",{type:"submit",id:"submit-btn",className:"btn btn-primary"},"Sign In")),r.a.createElement("div",null,this.state.errors?this.handleErrors():null)))))}}]),a}(n.Component),A=Object(U.g)(T),x=(a(472),f.url.FRONT_END_URL,f.url.API_URL),M=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(k.a)({},a,r))},n.handleSubmit=function(e){e.preventDefault();var t=n.state,a={email:t.email,password:t.password,password_confirmation:t.password_confirmation,location:t.location};g.a.patch("".concat(x,"/users/").concat(n.props.user.id,".json"),a,{withCredentials:!0}).then((function(e){console.log(e),n.setState({isChange:!0}),n.props.handleUserEdit(e.data),n.props.handleLogin(e.data)})).catch((function(e){return console.log("api errors:",e)}))},n.redirect=function(){n.props.history.push("/")},n.handleErrors=function(){return r.a.createElement("div",null,r.a.createElement("ul",null,n.state.errors.map((function(e){return r.a.createElement("li",{key:e},e)}))))},n.state={email:"",password:"",password_confirmation:"",location:"",errors:"",isChange:!1,SERVER_URL:x},n.redirect=n.redirect.bind(Object(u.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.setState({email:this.props.user.email,location:this.props.user.location})}},{key:"render",value:function(){var e=this.state;e.email,e.password,e.password_confirmation,e.location;return this.state.isChange?r.a.createElement(U.a,{to:"/"}):r.a.createElement("div",{className:"row justify-content-md-center"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h2",{className:"center"},"Update User Details"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"email"},"Email"),r.a.createElement("input",{className:"form-control",name:"email",type:"email",id:"email",placeholder:"Email",onChange:this.handleChange,value:this.state.email})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"password"},"Update Password"),r.a.createElement("input",{className:"form-control",type:"password",name:"password_confirmation",id:"password",placeholder:"Password",onChange:this.handleChange,value:this.state.password})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"password-confirmation"},"Confirm Password"),r.a.createElement("input",{className:"form-control",type:"password",name:"password",id:"password-confirmation",placeholder:"Password",onChange:this.handleChange,value:this.state.password_confirmation})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"location"},"Update Location"),r.a.createElement("input",{className:"form-control",type:"text",name:"location",id:"location",placeholder:"Location",onChange:this.handleChange,value:this.state.location})),r.a.createElement("button",{type:"submit",id:"submit-btn",className:"btn btn-primary"},"Submit")),r.a.createElement("div",null,this.state.errors?this.handleErrors():null)))))}}]),a}(n.Component),Q=(a(473),a(15)),B=a.n(Q),q=(f.url.FRONT_END_URL,f.url.API_URL,function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={user_id:"",products:n.props.products,user_products:[]},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){if(this.props.loggedInStatus){this.setState({user_id:this.props.user.id});var e=[];e.push(B.a.filter(this.props.products,{user_id:this.props.user.id})),this.setState({user_products:e[0]})}else this.props.history.push("/sign-in")}},{key:"showProducts",value:function(e){var t=this;return e?e.map((function(e){return r.a.createElement("div",{key:e.id,className:"col-3 item"},r.a.createElement("img",{className:"thumbnail",src:e.image_url,alt:e.name}),r.a.createElement("h3",{key:e.id},e.name.slice(0,25)," ..."),r.a.createElement("p",null,"Category: ",e.category),r.a.createElement("p",null,"Quantity available: ",e.quantity),r.a.createElement("p",null,e.description.slice(0,30),"..."),r.a.createElement("p",null,"Posted: ",Math.floor(Math.abs(new Date-new Date(e.created_at))/1e3/60/60/24)," days ago"),t.props.isLoggedIn?r.a.createElement("button",{type:"button",className:"btn btn-success btn-sm",onClick:function(){t.handleClick(e.id)}},"Add a Product"):"")})):r.a.createElement("h2",null,"Add a Product")}},{key:"render",value:function(){return r.a.createElement("div",{className:"myProducts"},this.props.loggedInStatus?r.a.createElement("div",{className:"shoppingCart"},r.a.createElement("h1",null,"My Products"),r.a.createElement("div",{className:"row"},this.showProducts(this.state.user_products)),r.a.createElement(p.b,{to:"/add-product",className:"btn btn-success btn-sm"},"Add Product")):r.a.createElement("h1",null,"Please Sign in to see your products"))}}]),a}(n.Component)),F=(f.url.FRONT_END_URL,f.url.API_URL),G=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(k.a)({},a,r))},n.handleSubmit=function(e){e.preventDefault();var t=n.state,a={email:t.email,password:t.password,password_confirmation:t.password_confirmation,location:t.location};g.a.patch("".concat(F,"/users/").concat(n.props.user.id,".json"),a,{withCredentials:!0}).then((function(e){console.log(e),n.setState({isChange:!0}),n.props.handleUserEdit(e.data),n.props.handleLogin(e.data)})).catch((function(e){return console.log("api errors:",e)}))},n.redirect=function(){n.props.history.push("/")},n.handleErrors=function(){return r.a.createElement("div",null,r.a.createElement("ul",null,n.state.errors.map((function(e){return r.a.createElement("li",{key:e},e)}))))},n.state={email:"",password:"",password_confirmation:"",location:"",errors:"",isChange:!1,SERVER_URL:F},n.redirect=n.redirect.bind(Object(u.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.setState({email:this.props.user.email,location:this.props.user.location})}},{key:"render",value:function(){return this.props.isLoggedIn?r.a.createElement(U.a,{to:"/"}):r.a.createElement("div",{className:"row justify-content-md-center"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h2",{className:"center"},"Add a new Product"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"productname"},"Product Name"),r.a.createElement("input",{className:"form-control",name:"email",type:"productname",id:"productname",placeholder:"Product Name",onChange:this.handleChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"password"},"Category"),r.a.createElement("input",{className:"form-control",type:"password",name:"password_confirmation",id:"password",placeholder:"Sanitizer",onChange:this.handleChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"password-confirmation"},"Description"),r.a.createElement("input",{className:"form-control",type:"password",name:"password",id:"password-confirmation",placeholder:"Description",onChange:this.handleChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"quantity"},"Quantity in Stock"),r.a.createElement("input",{className:"form-control",type:"text",name:"quantity",id:"quantity",placeholder:"1",onChange:this.handleChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"imageurl"},"Add an Image"),r.a.createElement("input",{className:"form-control",type:"text",name:"imageurl",id:"imageurl",placeholder:"http://fillmurray.com/400/400",onChange:this.handleChange})),r.a.createElement("button",{type:"submit",id:"submit-btn",className:"btn btn-primary"},"Create")),r.a.createElement("div",null,this.state.errors?this.handleErrors():null)))))}}]),a}(n.Component),Z=a(153),z=(a(145),a(146)),H=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleClick=function(e){n.setState({sendToCart:e}),n.props.updateCart(e)},n.handleChange=function(e){var t=e.target.value;n.setState({value:t})},n.state={value:"",products:n.props.products,sendToCart:"",userGPS:{},selectedProduct:""},n.showProducts=n.showProducts.bind(Object(u.a)(n)),n.matchUser=n.matchUser.bind(Object(u.a)(n)),n.handleClick=n.handleClick.bind(Object(u.a)(n)),n.getCategories=n.getCategories.bind(Object(u.a)(n)),n.handleSort=n.handleSort.bind(Object(u.a)(n)),n.resetSorts=n.resetSorts.bind(Object(u.a)(n)),n.filterBy=n.filterBy.bind(Object(u.a)(n)),n.handleFilter=n.handleFilter.bind(Object(u.a)(n)),n.productRedirect=n.productRedirect.bind(Object(u.a)(n)),n.props.loggedInStatus&&O(n.props.user.location).then((function(e){if("ZERO_RESULTS"===e.data.status)console.log("user address not found");else{var t=e.data.results[0].geometry.location;n.setState({userGPS:t})}})),n}return Object(i.a)(a,[{key:"matchUser",value:function(e){return this.props.users.length>0?this.props.users[B.a.findIndex(this.props.users,{id:e})].name:""}},{key:"getCategories",value:function(){var e=[];if(this.props.products)return this.props.products.map((function(t){e.push(t.category)})),e.filter((function(e,t,a){return a.indexOf(e)===t})).map((function(e){return r.a.createElement("option",{value:e,key:e}," ",e," ")}))}},{key:"sortByQuantity",value:function(){var e=B.a.orderBy(this.props.products,"quantity","desc");this.setState({products:e})}},{key:"sortByRecent",value:function(){var e=B.a.orderBy(this.props.products,"created_at","desc");this.setState({products:e})}},{key:"handleSort",value:function(e){var t=e.target.value;"quantity"===t&&this.sortByQuantity(),"created-at"===t&&this.sortByRecent()}},{key:"handleFilter",value:function(e){var t=e.target.value;this.filterBy(t)}},{key:"productRedirect",value:function(e,t){e.preventDefault(),this.setState({selectedProduct:t}),this.props.viewProduct(t)}},{key:"showProducts",value:function(e){var t=this;return e?e.map((function(e){return O(e.address).then((function(e){"ZERO_RESULTS"===e.data.status?console.log("address not found"):e.data.results[0].geometry.location})),r.a.createElement("div",{key:e.id,className:"col-3 item"},r.a.createElement("img",{className:"thumbnail",src:e.image_url,alt:e.name}),r.a.createElement("a",{href:"",onClick:function(a){t.productRedirect(a,e.id)}},r.a.createElement("h3",{key:e.id},e.name.slice(0,25)," ...")),r.a.createElement("p",null,"Category: ",e.category),r.a.createElement("p",null,"Quantity available: ",e.quantity),r.a.createElement("p",null,e.description.slice(0,30),"..."),r.a.createElement("p",null,"Provided by: ",r.a.createElement("a",{href:""},t.matchUser(e.user_id))),r.a.createElement("p",null,"Posted: ",Math.floor(Math.abs(new Date-new Date(e.created_at))/1e3/60/60/24)," days ago"),t.props.loggedInStatus?r.a.createElement("p",null,Math.round(z(parseInt(e.lat),parseInt(e.lng),t.state.userGPS.lat,t.state.userGPS.lng)),"km away"):r.a.createElement("p",null,"Location: ",e.location),t.props.isLoggedIn?r.a.createElement("button",{type:"button",className:"btn btn-success btn-sm",onClick:function(){t.handleClick(e.id)}},"Add to Cart"):"",t.state.sendToCart?r.a.createElement(U.a,{to:{pathname:"/shoppingcart",state:{product_id:t.state.sendToCart}}}):"",t.state.selectedProduct?r.a.createElement(U.a,{to:{pathname:"/productview",state:{product_id:t.state.selectedProduct}}}):"")})):""}},{key:"filterBy",value:function(e){if("all"==e)this.setState({products:this.props.products});else{var t=B.a.filter(this.props.products,(function(t){return t.category==e}));this.setState({products:t})}}},{key:"resetSorts",value:function(){this.setState({products:this.props.products})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-8 searchbar"},r.a.createElement("span",{className:"search-heading"},"Search:")," ",r.a.createElement("input",{type:"text",value:this.state.value,onChange:this.handleChange})),r.a.createElement("div",{className:"col-4 sort"},r.a.createElement("div",{className:"cat-select"},r.a.createElement("span",{className:"category-heading"},"Category:"),r.a.createElement("select",{id:"categories",name:"categories",onChange:this.handleFilter},this.getCategories(),r.a.createElement("option",{value:"all"},"All"))),r.a.createElement("div",{className:"sort-select"},r.a.createElement("span",{className:"sort-heading"},"Sort by:"),r.a.createElement("select",{id:"sort",name:"sort",onChange:this.handleSort},r.a.createElement("option",{value:"created-at"},"Date Added"),r.a.createElement("option",{value:"num-orders"},"Popularity"),r.a.createElement("option",{value:"quantity"},"Quantity Available")),r.a.createElement("button",{id:"resetbtn",className:"btn btn-warning",onClick:this.resetSorts},"Reset")))),r.a.createElement("div",{className:"row"},r.a.createElement(Z.a,{value:this.state.value,data:this.state.products,renderResults:function(t){return e.showProducts(t)}})))}}]),a}(n.Component),K=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).propsIn=n.propsIn.bind(Object(u.a)(n)),n}return Object(i.a)(a,[{key:"propsIn",value:function(){return this.props.users.length>0&&this.props.products.length>0?r.a.createElement(H,{users:this.props.users,products:this.props.products,updateCart:this.props.updateCart,isLoggedIn:this.props.isLoggedIn,viewProduct:this.props.viewProduct}):""}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Order page"),this.propsIn())}}]),a}(n.Component),V=a(54),W=(a(474),function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).Product=function(){return n.state.updatedCart.map((function(e,t){return console.log(e),r.a.createElement("div",{key:e.id},r.a.createElement("img",{src:e.image_url,alt:e.name}),r.a.createElement("h5",null,e.name.slice(0,25)," ..."),r.a.createElement("p",null,"Category: ",e.category),r.a.createElement("p",null,"Quantity available: ",e.quantity),r.a.createElement("p",null,e.description.slice(0,30),"..."),e.quantity>0?r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){return function(e,t){var a=n.state.updatedCart.slice(0);a.forEach((function(a){a.id==e&&a.orderQuantity>0&&(a.orderQuantity=t-1)})),n.setState({updatedCart:a})}(e.id,e.orderQuantity)}},"-"),r.a.createElement("input",{className:"input",value:e.orderQuantity,onChange:function(t){return function(e,t){console.log(e.target.value,t);var a=n.state.updatedCart.slice(0);a.forEach((function(a){a.id==t&&(a.orderQuantity=e.target.value)})),n.setState({updatedCart:a})}(t,e.id)}}),r.a.createElement("button",{onClick:function(){return function(e,t){var a=n.state.updatedCart.slice(0);a.forEach((function(a){a.id==e&&a.quantity>a.orderQuantity&&(a.orderQuantity=t+1)})),n.setState({updatedCart:a})}(e.id,e.orderQuantity)}},"+")):r.a.createElement("p",{className:"text-danger"}," product is out of stock "))}))},n.state={products:[],product_ids:[],updatedCart:[]},n.Product=n.Product.bind(Object(u.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;if(this.props.location.state||this.props.loggedInStatus){if(this.props.location.state){var t=[];this.props.sendToCart.map((function(a){t.push(B.a.filter(e.props.products,{id:a})[0])})),this.setState({updatedCart:t},(function(){e.setState((function(e){return Object(V.a)(Object(V.a)({},e),{},{updatedCart:e.updatedCart.map((function(e){return Object(V.a)(Object(V.a)({},e),{},{orderQuantity:0})}))})}))}))}}else this.props.history.push("/sign-in")}},{key:"render",value:function(){return r.a.createElement("div",{className:"shoppingCart"},this.props.loggedInStatus?r.a.createElement("div",{className:"shoppingCart"},r.a.createElement("h1",null,"Shopping Cart"),r.a.createElement("p",null,this.Product()),r.a.createElement(p.b,{to:"/my-purchase",className:"btn btn-success btn-sm"},"Check out")):r.a.createElement("h1",null,"Please Sign in to see your cart"))}}]),a}(n.Component)),J=a(146),X=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleClick=function(e){n.setState({sendToCart:e}),n.props.updateCart(e)},n.state={fullProduct:{},sendToCart:""},n.handleClick=n.handleClick.bind(Object(u.a)(n)),n.matchUser=n.matchUser.bind(Object(u.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.matchProduct()}},{key:"matchProduct",value:function(){var e=B.a.filter(this.props.products,{id:this.props.productSelect})[0];this.setState({fullProduct:e})}},{key:"matchUser",value:function(e){if(!(this.props.users.length>0))return"";var t=B.a.findIndex(this.props.users,{id:e});return t>=0?this.props.users[t].name:void 0}},{key:"render",value:function(){var e=this,t=this.state.fullProduct;return t?r.a.createElement("div",{key:t.id,className:"container"},r.a.createElement("img",{className:"fullsize",src:t.image_url,alt:t.name}),r.a.createElement("h3",{key:t.id},t.name),r.a.createElement("p",null,"Category: ",t.category),r.a.createElement("p",null,"Quantity available: ",t.quantity),r.a.createElement("p",null,t.description),r.a.createElement("p",null,"Provided by: ",this.props.users?this.matchUser(t.user_id):""),r.a.createElement("p",null,"Posted: ",Math.floor(Math.abs(new Date-new Date(t.created_at))/1e3/60/60/24)," days ago"),this.props.loggedInStatus?r.a.createElement("p",null,Math.round(J(parseInt(t.lat),parseInt(t.lng),this.state.userGPS.lat,this.state.userGPS.lng)),"km away"):r.a.createElement("p",null,"Location: ",t.location),this.props.isLoggedIn?r.a.createElement("button",{type:"button",className:"btn btn-success btn-sm",onClick:function(){e.handleClick(t.id)}},"Add to Cart"):"",this.state.sendToCart?r.a.createElement(U.a,{to:{pathname:"/shoppingcart",state:{product_id:this.state.sendToCart}}}):""):""}}]),a}(n.Component),$=(a(475),function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("h1",null,"My Purchase Details coming soon")}}]),a}(n.Component)),Y=(a(476),f.url.FRONT_END_URL,f.url.API_URL),ee=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).loginStatus=function(){g.a.get("".concat(Y,"/logged_in"),{withCredentials:!0}).then((function(e){e.data.logged_in?(n.handleLogin(e),n.readCookie()):n.handleLogout()})).catch((function(e){return console.log("api errors:",e)}))},n.handleLogin=function(e){n.setState({isLoggedIn:!0,user:e.user})},n.handleLogout=function(){g.a.delete("".concat(Y,"/logout")).then(n.setState({isLoggedIn:!1,setAuth:!1,user:{}}),R.a.remove("user"))},n.handleUserEdit=function(e){n.setState({user:e})},n.readCookie=function(){R.a.get("user")&&n.setState({setAuth:!0})},n.state={PRODUCT_URL:"".concat(Y,"/products"),USER_URL:"".concat(Y,"/users"),isLoggedIn:!1,setAuth:!1,user:{},users:[],products:[],sendToCart:[],productSelect:""},n.fetchProducts=n.fetchProducts.bind(Object(u.a)(n)),n.fetchUsers=n.fetchUsers.bind(Object(u.a)(n)),n.updateCart=n.updateCart.bind(Object(u.a)(n)),n.viewProduct=n.viewProduct.bind(Object(u.a)(n)),n.readCookie=n.readCookie.bind(Object(u.a)(n)),n.fetchProducts(),n.fetchUsers(),n.readCookie(),n}return Object(i.a)(a,[{key:"updateCart",value:function(e){this.setState({sendToCart:B()([e].concat(Object(l.a)(this.state.sendToCart))).uniq().value()})}},{key:"viewProduct",value:function(e){this.setState({productSelect:e})}},{key:"fetchProducts",value:function(){var e=this;g.a.get(this.state.PRODUCT_URL).then((function(t){t.data?e.setState({products:t.data}):e.setState({errors:t.data.errors})}))}},{key:"fetchUsers",value:function(){var e=this;g.a.get(this.state.USER_URL).then((function(t){t.data?e.setState({users:t.data.users}):e.setState({errors:t.data.errors})}))}},{key:"componentDidMount",value:function(){this.loginStatus(),this.readCookie()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App"},r.a.createElement(p.a,null,r.a.createElement(E,{handleLogout:this.handleLogout,userID:this.state.user,loggedInStatus:this.state.isLoggedIn}),r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"body"},r.a.createElement(U.d,null,r.a.createElement(U.b,{exact:!0,path:"/about",component:v}),r.a.createElement(U.b,{exact:!0,path:"/sign-up",render:function(t){return r.a.createElement(_,Object.assign({},t,{handleLogin:e.handleLogin,loggedInStatus:e.state.isLoggedIn}))}}),r.a.createElement(U.b,{exact:!0,path:"/sign-in",render:function(t){return r.a.createElement(A,{handleLogin:e.handleLogin,readCookie:e.readCookie,loggedInStatus:e.state.isLoggedIn})}}),r.a.createElement(U.b,{exact:!0,path:"/order",render:function(t){return r.a.createElement(K,{users:e.state.users,products:e.state.products,updateCart:e.updateCart,isLoggedIn:e.state.isLoggedIn,viewProduct:e.viewProduct})}}),r.a.createElement(U.b,{exact:!0,path:"/shoppingcart",render:function(t){return r.a.createElement(W,Object.assign({},t,{handleLogout:e.handleLogout,sendToCart:e.state.sendToCart,products:e.state.products,loggedInStatus:e.state.isLoggedIn}))}}),r.a.createElement(U.b,{exact:!0,path:"/profile",render:function(t){return r.a.createElement(M,{user:e.state.user,loggedInStatus:e.state.isLoggedIn,handleUserEdit:e.handleUserEdit})}}),r.a.createElement(U.b,{exact:!0,path:"/my-products",render:function(t){return r.a.createElement(q,Object.assign({},t,{user:e.state.user,products:e.state.products,loggedInStatus:e.state.isLoggedIn}))}}),r.a.createElement(U.b,{exact:!0,path:"/add-product",render:function(t){return r.a.createElement(G,Object.assign({},t,{user:e.state.user,products:e.state.products,loggedInStatus:e.state.isLoggedIn}))}}),r.a.createElement(U.b,{exact:!0,path:"/productview",render:function(t){return r.a.createElement(X,{users:e.state.users,products:e.state.products,productSelect:e.state.productSelect,isLoggedIn:e.state.isLoggedIn})}}),r.a.createElement(U.b,{exact:!0,path:"/my-purchase",render:function(t){return r.a.createElement($,{loggedInStatus:e.state.isLoggedIn})}}),r.a.createElement(U.b,{exact:!0,path:"/",render:function(t){return r.a.createElement(j,Object.assign({handleLogout:e.handleLogout},e.state,{loggedInStatus:e.state.isLoggedIn}))}}))))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(477);o.a.render(r.a.createElement(ee,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[154,1,2]]]);
//# sourceMappingURL=main.5db398e7.chunk.js.map